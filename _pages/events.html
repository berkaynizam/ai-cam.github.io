---
layout: default
title: Events
permalink: /events/
---

<!-- Events Page -->
<section class="events-page">
    <div class="shapes">
        <div class="light-img">
            {% include icons/home-slider-shape-light.svg %}
        </div>
        <div class="dark-img">
            {% include icons/home-slider-shape-dark.svg %}
        </div>
    </div>

    <div class="container">
        <h1>Events</h1>

        {% assign sorted_events = site.events | sort: 'event_date' | reverse %}
        {% if sorted_events.size > 0 %}
        {% assign first_event = sorted_events[0] %}
        <div class="main-box">
            <div class="row">
                <div class="col-lg-6">
                    <div class="text">
                        <a href="{{ first_event.url }}"><h2>{{ first_event.title }}</h2></a>
                        {% if first_event.excerpt %}
                        <p>{{ first_event.excerpt }}</p>
                        {% elsif first_event.content %}
                        <p>{{ first_event.content | strip_html | truncatewords: 30 }}</p>
                        {% endif %}
                        <ul class="category">
                            {% if first_event.event_date and first_event.time %}
                            <li>{{ first_event.event_date | date: "%-d %B %Y" }} {{ first_event.time }}</li>
                            {% elsif first_event.event_date %}
                            <li>{{ first_event.event_date | date: "%-d %B %Y" }}</li>
                            {% endif %}
                            {% if first_event.event_categories %}
                                {% assign category_name = first_event.event_categories %}
                                {% assign category = site.event_categories | where: "name", category_name | first %}
                                {% if category %}
                                <li>{{ category.name }}</li>
                                {% else %}
                                <li>{{ category_name }}</li>
                                {% endif %}
                            {% endif %}
                        </ul>
                    </div>
                </div>

                <div class="col-lg-6">
                    {% if first_event.cover_image %}
                    <a href="{{ first_event.url }}">
                        <img src="{{ first_event.cover_image | relative_url }}" alt="{{ first_event.title }}">
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>
<!-- Events Page End -->

<!-- Events Page List -->
 <section class="events-page-list">
    <div class="container">
        <ul class="list">
            <li class="active"><a href="{{ '/events/' | relative_url }}">All</a></li>
            {% assign sorted_categories = site.event_categories | sort: 'order' %}
            {% for category in sorted_categories %}
                {% assign category_name = category.data.name | default: category.name %}
                <li><a href="{{ category.url }}">{{ category_name }}</a></li>
            {% endfor %}
        </ul>

        <div class="row" id="events-container">
            {% assign sorted_events = site.events | sort: 'event_date' | reverse %}
            {% assign total_events = sorted_events | size %}
            {% assign initial_limit = 10 %}
            {% if total_events < 10 %}
                {% assign initial_limit = total_events %}
            {% endif %}
            {% for event in sorted_events limit: initial_limit %}
                {% if forloop.index > 1 %}
            <div class="col-lg-4" data-event-id="{{ event.slug }}">
                <div class="item">
                    <div class="shapes">
                        <div class="light-img">
                            {% include icons/events-item-shape-light.svg %}
                        </div>
                        <div class="dark-img">
                            {% include icons/events-item-shape-dark.svg %}
                        </div>
                    </div>

                    <a href="{{ event.url }}" class="picture">
                        {% assign category_class = '' %}
                        {% if event.event_categories %}
                            {% assign category_name = event.event_categories %}
                            {% assign category = site.event_categories | where: "name", category_name | first %}
                            {% if category %}
                                {% if category_name == 'Past Events' %}
                                    {% assign category_class = 'past-event' %}
                                {% endif %}
                                <span class="category {{ category_class }}">{{ category_name }}</span>
                            {% else %}
                                <span class="category">{{ category_name }}</span>
                            {% endif %}
                        {% endif %}
                        {% if event.cover_image %}
                        <img src="{{ event.cover_image | relative_url }}" alt="{{ event.title }}">
                        {% endif %}
                    </a>

                    <div class="text">
                        <div class="top-title">
                            <a href="{{ event.url }}"><h3>{{ event.title }}</h3></a>
                            <a href="{{ event.url }}" class="button"><img src="{{ '/assets/images/icons/arrow-right-up-black.svg' | relative_url }}" alt=""></a>
                        </div>

                        {% if event.event_date %}<p>{{ event.event_date | date: "%-d %B %Y" }}</p>{% endif %}
                    </div>
                </div>
            </div>
                {% endif %}
            {% endfor %}
        </div>

        {% if total_events > 10 %}
        <div class="load-more">
            <a href="javascript:void(0)" id="load-more-btn">Load more</a>
        </div>
        {% endif %}
    </div>
 </section>
<!-- Events Page List End -->

<!-- Global Join -->
<section class="global-join bg-soft">
    <div class="container">
        <div class="item">
            <h2>Join our ai@cam community</h2>
            <p>Keep up to date with the latest.</p>
            <div class="buttons">
                <a href="#" class="button">
                    Subscribe

                    <div class="icon">
                        <img src="{{ '/assets/images/icons/arrow-right-up-white.svg' | relative_url }}" alt="">
                    </div>
                </a>

                <a href="#" class="button">
                    Support Us

                    <div class="icon">
                        <img src="{{ '/assets/images/icons/arrow-right-up-white.svg' | relative_url }}" alt="">
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>
<!-- Global Join End -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    const loadMoreBtn = document.getElementById('load-more-btn');
    const eventsContainer = document.getElementById('events-container');
    let currentPage = 1;
    const itemsPerPage = 3;
    let allEvents = [];
    
    // Calculate the number of items displayed on initial load
    const initialItems = document.querySelectorAll('#events-container [data-event-id]');
    const mainBoxExists = document.querySelector('.main-box') !== null;
    let displayedCount = initialItems.length + (mainBoxExists ? 1 : 0);

    // Load all events from JSON
    if (loadMoreBtn) {
        fetch('/events.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(text => {
                try {
                    const data = JSON.parse(text);
                    allEvents = Array.isArray(data) ? data : [];
                    // Sort by date (newest first)
                    allEvents.sort((a, b) => {
                        if (!a.event_date) return 1;
                        if (!b.event_date) return -1;
                        return new Date(b.event_date) - new Date(a.event_date);
                    });
                    // Hide load more button if there are 10 or fewer items
                    if (allEvents.length <= 10) {
                        const loadMoreDiv = loadMoreBtn.closest('.load-more');
                        if (loadMoreDiv) {
                            loadMoreDiv.style.display = 'none';
                        }
                    }
                } catch (e) {
                    console.error('Error parsing JSON:', e, 'Response text:', text);
                    allEvents = [];
                }
            })
            .catch(error => console.error('Error loading events:', error));

        // When load more button is clicked
        loadMoreBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (allEvents.length === 0) {
                fetch('/events.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.text();
                    })
                    .then(text => {
                        try {
                            const data = JSON.parse(text);
                            allEvents = Array.isArray(data) ? data : [];
                            // Sort by date (newest first)
                            allEvents.sort((a, b) => {
                                if (!a.date) return 1;
                                if (!b.date) return -1;
                                return new Date(b.date) - new Date(a.date);
                            });
                            loadMoreEvents();
                        } catch (e) {
                            console.error('Error parsing JSON:', e, 'Response text:', text);
                            allEvents = [];
                        }
                    })
                    .catch(error => console.error('Error loading events:', error));
            } else {
                loadMoreEvents();
            }
        });
    }

    function formatDate(dateString) {
        if (!dateString) return '';
        const date = new Date(dateString);
        const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        const day = date.getDate();
        const month = months[date.getMonth()];
        const year = date.getFullYear();
        return `${day} ${month} ${year}`;
    }

    function loadMoreEvents() {
        if (!loadMoreBtn || !eventsContainer) return;
        
        // Check remaining item count
        const remainingEvents = allEvents.length - displayedCount;
        const eventsToLoad = Math.min(itemsPerPage, remainingEvents);
        
        if (eventsToLoad <= 0) {
            const loadMoreDiv = loadMoreBtn.closest('.load-more');
            if (loadMoreDiv) {
                loadMoreDiv.style.display = 'none';
            }
            return;
        }
        
        const nextEvents = allEvents.slice(displayedCount, displayedCount + eventsToLoad);
        
        if (nextEvents.length === 0) {
            const loadMoreDiv = loadMoreBtn.closest('.load-more');
            if (loadMoreDiv) {
                loadMoreDiv.style.display = 'none';
            }
            return;
        }

        // Find load more div
        const loadMoreDiv = loadMoreBtn.closest('.load-more');
        
        // Find the last row
        const rows = eventsContainer.querySelectorAll('.row');
        let rowElement = rows.length > 0 ? rows[rows.length - 1] : null;
        
        // Create new row if no row exists or last row has 3 col-lg-4 items
        if (!rowElement || rowElement.querySelectorAll('.col-lg-4').length >= 3) {
            rowElement = document.createElement('div');
            rowElement.className = 'row';
            // Insert before load more div
            if (loadMoreDiv && loadMoreDiv.parentNode) {
                loadMoreDiv.parentNode.insertBefore(rowElement, loadMoreDiv);
            } else {
                eventsContainer.appendChild(rowElement);
            }
        }
        
        nextEvents.forEach((event_item, index) => {
            const formattedDate = formatDate(event_item.event_date);
            const categoryName = event_item.category_name || '';
            const categoryClass = categoryName === 'Past Events' ? 'past-event' : '';
            
            // Always add in col-lg-4 format after load more
            const html = `
                <div class="col-lg-4" data-event-id="${event_item.slug}">
                    <div class="item">
                        <div class="shapes">
                            <img src="/assets/images/materials/events-item-shape-light.svg" class="light-img" alt="">
                            <img src="/assets/images/materials/events-item-shape-dark.svg" class="dark-img" alt="">
                        </div>
                        <a href="${event_item.url}" class="picture">
                            ${categoryName ? `<span class="category ${categoryClass}">${categoryName}</span>` : ''}
                            ${event_item.cover_image ? `<img src="${event_item.cover_image}" alt="${event_item.title || ''}">` : ''}
                        </a>
                        <div class="text">
                            <div class="top-title">
                                <a href="${event_item.url}"><h3>${event_item.title || ''}</h3></a>
                                <a href="${event_item.url}" class="button"><img src="/assets/images/icons/arrow-right-up-black.svg" alt=""></a>
                            </div>
                            ${formattedDate ? `<p>${formattedDate}</p>` : ''}
                        </div>
                    </div>
                </div>
            `;
            
            // Add HTML to end of row
            rowElement.insertAdjacentHTML('beforeend', html);
            
            // Add observer to newly added item's shape
            const newItem = rowElement.querySelector('.col-lg-4:last-child');
            const newItemShapes = newItem ? newItem.querySelector('.shapes') : null;
            const newItemElement = newItem ? newItem.querySelector('.item') : null;
            
            if (newItemShapes && 'IntersectionObserver' in window) {
                const eventsItemObserverOptions = {
                    root: null,
                    rootMargin: '0% 0% -20% 0%',
                    threshold: 0
                };
                const eventsItemObserverCallback = function(entries) {
                    entries.forEach(function(entry) {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('in-view');
                            eventsItemObserver.unobserve(entry.target);
                        }
                    });
                };
                const eventsItemObserver = new IntersectionObserver(eventsItemObserverCallback, eventsItemObserverOptions);
                eventsItemObserver.observe(newItemShapes);
            }
            
            // Fade-in animation with GSAP - with ScrollTrigger
            if (newItemElement && typeof gsap !== 'undefined') {
                gsap.set(newItemElement, { opacity: 0, y: 50, scale: 0.95 });
                
                gsap.to(newItemElement, {
                    opacity: 1,
                    y: 0,
                    scale: 1,
                    duration: 0.8,
                    ease: "power3.out",
                    scrollTrigger: {
                        trigger: newItem,
                        start: "top 85%",
                        toggleActions: "play none none none",
                        once: true
                    }
                });
            }
            
            // Create new row if row has 3 items and more items exist
            if (rowElement.querySelectorAll('.col-lg-4').length >= 3 && index < nextEvents.length - 1) {
                rowElement = document.createElement('div');
                rowElement.className = 'row';
                if (loadMoreDiv && loadMoreDiv.parentNode) {
                    loadMoreDiv.parentNode.insertBefore(rowElement, loadMoreDiv);
                } else {
                    eventsContainer.appendChild(rowElement);
                }
            }
        });

        displayedCount += nextEvents.length;
        currentPage++;

        if (displayedCount >= allEvents.length) {
            if (loadMoreDiv) {
                loadMoreDiv.style.display = 'none';
            }
        }
    }
});
</script>